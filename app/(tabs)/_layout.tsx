import { Tabs } from "expo-router";
import { Text, StyleSheet } from "react-native";
import Icon from "../../components/Icon";

const NavigationLabel = ({ focused, label }: { focused: boolean; label: string }) =>{
  return(
  <Text style={{ fontFamily: focused ? 'Poppins-Bold' : 'Poppins-Medium', fontSize: 10, color: '#31572c', textAlign:'center'}}>{label}</Text>
);};

const icons = [
  { name: 'Główna', active: 'm498.195312 222.695312c-.011718-.011718-.023437-.023437-.035156-.035156l-208.855468-208.847656c-8.902344-8.90625-20.738282-13.8125-33.328126-13.8125-12.589843 0-24.425781 4.902344-33.332031 13.808594l-208.746093 208.742187c-.070313.070313-.140626.144531-.210938.214844-18.28125 18.386719-18.25 48.21875.089844 66.558594 8.378906 8.382812 19.445312 13.238281 31.277344 13.746093.480468.046876.964843.070313 1.453124.070313h8.324219v153.699219c0 30.414062 24.746094 55.160156 55.167969 55.160156h81.710938c8.28125 0 15-6.714844 15-15v-120.5c0-13.878906 11.289062-25.167969 25.167968-25.167969h48.195313c13.878906 0 25.167969 11.289063 25.167969 25.167969v120.5c0 8.285156 6.714843 15 15 15h81.710937c30.421875 0 55.167969-24.746094 55.167969-55.160156v-153.699219h7.71875c12.585937 0 24.421875-4.902344 33.332031-13.808594 18.359375-18.371093 18.367187-48.253906.023437-66.636719zm0 0', inactive: 'm498.699219 222.695312c-.015625-.011718-.027344-.027343-.039063-.039062l-208.855468-208.847656c-8.902344-8.90625-20.738282-13.808594-33.328126-13.808594-12.589843 0-24.425781 4.902344-33.332031 13.808594l-208.746093 208.742187c-.070313.070313-.144532.144531-.210938.214844-18.28125 18.386719-18.25 48.21875.089844 66.558594 8.378906 8.382812 19.441406 13.234375 31.273437 13.746093.484375.046876.96875.070313 1.457031.070313h8.320313v153.695313c0 30.417968 24.75 55.164062 55.167969 55.164062h81.710937c8.285157 0 15-6.71875 15-15v-120.5c0-13.878906 11.292969-25.167969 25.171875-25.167969h48.195313c13.878906 0 25.167969 11.289063 25.167969 25.167969v120.5c0 8.28125 6.714843 15 15 15h81.710937c30.421875 0 55.167969-24.746094 55.167969-55.164062v-153.695313h7.71875c12.585937 0 24.421875-4.902344 33.332031-13.8125 18.359375-18.367187 18.367187-48.253906.027344-66.632813zm-21.242188 45.421876c-3.238281 3.238281-7.542969 5.023437-12.117187 5.023437h-22.71875c-8.285156 0-15 6.714844-15 15v168.695313c0 13.875-11.289063 25.164062-25.167969 25.164062h-66.710937v-105.5c0-30.417969-24.746094-55.167969-55.167969-55.167969h-48.195313c-30.421875 0-55.171875 24.75-55.171875 55.167969v105.5h-66.710937c-13.875 0-25.167969-11.289062-25.167969-25.164062v-168.695313c0-8.285156-6.714844-15-15-15h-22.328125c-.234375-.015625-.464844-.027344-.703125-.03125-4.46875-.078125-8.660156-1.851563-11.800781-4.996094-6.679688-6.679687-6.679688-17.550781 0-24.234375.003906 0 .003906-.003906.007812-.007812l.011719-.011719 208.847656-208.839844c3.234375-3.238281 7.535157-5.019531 12.113281-5.019531 4.574219 0 8.875 1.78125 12.113282 5.019531l208.800781 208.796875c.03125.03125.066406.0625.097656.09375 6.644531 6.691406 6.632813 17.539063-.03125 24.207032zm0 0' },
  { name: 'Pieczątki', active: 'M61 467v30c0 8.28 6.72 15 15 15h360c8.28 0 15-6.72 15-15v-30z M332.44 176.98c23.06-24.48 32.84-57.75 26.82-91.29-8.7-48.54-51.98-85.69-103.26-85.69-51.87 0-94.68 37.77-103.26 85.69-6.02 33.54 3.76 66.81 26.82 91.29 15.61 16.58 21.39 37.79 23.49 52.66 4.41 31.27-5.07 54.9-16.96 72.36h139.84c-11.9-17.46-21.38-41.11-16.98-72.36 2.1-14.87 7.88-36.08 23.49-52.66z M466 437h-420c-8.284 0-15-6.716-15-15v-15c0-41.355 33.645-75 75-75h300c41.355 0 75 33.645 75 75v15c0 8.284-6.716 15-15 15z', inactive: 'm406 332h-53.421c-27.587-27.228-50.282-55.148-43.626-102.36 2.097-14.873 7.873-36.08 23.485-52.652 23.064-24.482 32.843-57.759 26.829-91.297-8.728-48.67-52.12-85.692-103.267-85.691-.001 0 .001 0-.001 0-51.715 0-94.645 37.606-103.267 85.689-6.014 33.539 3.765 66.815 26.829 91.297 15.612 16.572 21.389 37.78 23.485 52.652 6.768 48.006-17.562 76.635-43.626 102.361h-53.42c-41.355 0-75 33.645-75 75v30c0 8.284 6.716 15 15 15h15v45c0 8.284 6.716 15 15 15h360c8.284 0 15-6.716 15-15v-45h15c8.284 0 15-6.716 15-15v-30c0-41.354-33.645-74.999-75-74.999zm-173.246-106.549c-3.879-27.505-14.722-51.377-31.356-69.035-16.48-17.494-23.455-41.343-19.136-65.431 6.234-34.768 37.934-60.985 73.738-60.985s67.504 26.217 73.738 60.984c4.319 24.088-2.655 47.937-19.136 65.431-16.635 17.658-27.478 41.53-31.356 69.036-5.391 38.247 4.752 74.262 31.804 106.548h-110.1c27.048-32.282 37.193-68.312 31.804-106.548zm188.246 256.549h-330v-30h330zm30-60c-12.631 0-373.057 0-390 0v-15c0-24.813 20.187-45 45-45h300c24.813 0 45 20.187 45 45z' },
  { name: 'Kupony', active: 'm497 206.733c8.284 0 15-6.716 15-15v-37.436c0-46.314-27.65-73.964-73.965-73.964h-86.702v47.133c-.738 19.881-29.269 19.866-30 0v-47.133h-247.368c-46.315 0-73.965 27.651-73.965 73.965v37.436c0 8.284 6.716 15 15 15 65.275 2.48 65.246 96.068-.001 98.533-8.284 0-14.999 6.716-14.999 15v37.436c0 46.314 27.65 73.964 73.965 73.964h247.369v-47.133c.738-19.881 29.269-19.866 30 0v47.133h86.702c46.314 0 73.965-27.65 73.965-73.964v-37.436c0-8.284-6.716-15-15-15-65.275-2.477-65.246-96.071-.001-98.534zm-145.667 113.534c-.738 19.881-29.269 19.866-30 0v-32.133c.738-19.881 29.269-19.866 30 0zm0-96.4c-.738 19.881-29.269 19.866-30 0v-32.133c.738-19.881 29.269-19.866 30 0z', inactive: 'M336.333 176.733c-8.284 0-15 6.716-15 15v32.133c.738 19.881 29.269 19.866 30 0v-32.133c0-8.284-6.715-15-15-15z M336.333 273.133c-8.284 0-15 6.716-15 15v32.133c.738 19.881 29.269 19.866 30 0v-32.133c0-8.284-6.715-15-15-15z M497 206.733c8.284 0 15-6.716 15-15v-37.436c0-46.314-27.65-73.964-73.965-73.964h-364.07c-46.315 0-73.965 27.651-73.965 73.965v37.436c0 8.284 6.716 15 15 15 65.275 2.48 65.246 96.068-.001 98.533-8.284 0-14.999 6.716-14.999 15v37.436c0 46.314 27.65 73.964 73.965 73.964h364.07c46.314 0 73.965-27.65 73.965-73.964v-37.436c0-8.284-6.716-15-15-15-65.274-2.477-65.245-96.071 0-98.534zm-15 127.11v23.859c0 29.994-13.97 43.964-43.965 43.964h-86.702v-17.133c-.738-19.881-29.269-19.866-30 0v17.133h-247.368c-29.995.001-43.965-13.97-43.965-43.964v-23.859c85.163-17.728 85.104-137.991 0-155.687v-23.859c0-29.994 13.97-43.964 43.965-43.964h247.369v17.133c.738 19.881 29.269 19.866 30 0v-17.133h86.702c29.995 0 43.965 13.97 43.965 43.964v23.859c-85.164 17.729-85.105 137.992-.001 155.687z' },
  { name: 'Kawiarnie', active: 'M76 180c0 88.916 67.881 185.384 127.778 268.748 14.238 19.805 27.876 38.774 39.741 56.572 2.783 4.175 7.471 6.68 12.48 6.68s9.697-2.505 12.48-6.68c11.865-17.798 25.503-36.768 39.741-56.572 59.899-83.364 127.78-179.832 127.78-268.748 0-99.258-80.742-180-180-180s-180 80.742-180 180zm270 0c0 49.629-40.371 90-90 90s-90-40.371-90-90 40.371-90 90-90 90 40.371 90 90z M256 120a60 60 0 1 0 0 120a60 60 0 1 0 0 -120z', inactive: 'M243.519 505.32c2.782 4.173 7.466 6.68 12.481 6.68s9.699-2.506 12.481-6.68c35.499-53.247 87.786-119.008 124.222-185.889 29.134-53.476 43.297-99.085 43.297-139.431 0-99.252-80.748-180-180-180s-180 80.748-180 180c0 40.346 14.163 85.955 43.297 139.431 36.409 66.83 88.796 132.752 124.222 185.889zm12.481-475.32c82.71 0 150 67.29 150 150 0 35.204-12.967 76.118-39.641 125.079-31.407 57.649-76.225 116.128-110.359 165.29-34.129-49.155-78.95-107.638-110.359-165.29-26.674-48.961-39.641-89.875-39.641-125.079 0-82.71 67.29-150 150-150z M256 270c49.626 0 90-40.374 90-90s-40.374-90-90-90-90 40.374-90 90 40.374 90 90 90zm0-150c33.084 0 60 26.916 60 60s-26.916 60-60 60-60-26.916-60-60 26.916-60 60-60z' },
  { name: 'Profil', active: 'M256,0c-74.439,0-135,60.561-135,135s60.561,135,135,135s135-60.561,135-135S330.439,0,256,0z M423.966,358.195C387.006,320.667,338.009,300,286,300h-60c-52.008,0-101.006,20.667-137.966,58.195 C51.255,395.539,31,444.833,31,497c0,8.284,6.716,15,15,15h420c8.284,0,15-6.716,15-15 C481,444.833,460.745,395.539,423.966,358.195z', inactive: 'M256,0c-74.439,0-135,60.561-135,135s60.561,135,135,135s135-60.561,135-135S330.439,0,256,0z M256,240 c-57.897,0-105-47.103-105-105c0-57.897,47.103-105,105-105c57.897,0,105,47.103,105,105C361,192.897,313.897,240,256,240z M423.966,358.195C387.006,320.667,338.009,300,286,300h-60c-52.008,0-101.006,20.667-137.966,58.195 C51.255,395.539,31,444.833,31,497c0,8.284,6.716,15,15,15h420c8.284,0,15-6.716,15-15 C481,444.833,460.745,395.539,423.966,358.195z M61.66,482c7.515-85.086,78.351-152,164.34-152h60 c85.989,0,156.825,66.914,164.34,152H61.66z' },
];
  
const NavigationIcon = ({ focused, label }: { focused: boolean; label: string }) =>{
  let icon = icons.filter(icon => icon.name === label)[0];
  return (
    <Icon color={"#31572c"} path={ focused ? icon.active : icon.inactive} viewBox="0 0 512 512" />
);};

const getTabOptions = ( label: string ) => ({
  headerShown: false, 
  title: label,
  tabBarLabel: ({ focused }: { focused: boolean }) => ( <NavigationLabel focused={focused} label={label} /> ),
  tabBarIcon: ({ focused }: { focused: boolean }) => ( <NavigationIcon focused={focused} label={label} /> ),
});

export default function TabsLayout() {
  return(
    <Tabs screenOptions={{ tabBarStyle: styles.navBar }}>
      <Tabs.Screen name="index" options={ getTabOptions("Główna") }/>
      <Tabs.Screen name="stamps" options={ getTabOptions("Pieczątki") }/>
      <Tabs.Screen name="coupons" options={ getTabOptions("Kupony") } />
      <Tabs.Screen name="cafeterias" options={ getTabOptions("Kawiarnie") }/>
      <Tabs.Screen name="profile" options={ getTabOptions("Profil") }/>
    </Tabs>
);
}

const styles = StyleSheet.create({
  navBar:{
    display: 'flex',
    flexDirection: 'column',
    justifyContent: 'space-between',
    alignItems: 'center',        
    backgroundColor: '#fffcf2',
    borderTopColor: '#EADCC1',
    borderTopWidth: 0.5,
    height: 85,
    paddingTop: 14,
    paddingHorizontal: 10,
  }
});